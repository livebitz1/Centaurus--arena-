generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Simple starter schema â€” extend to match your application models
model User {
  id        String   @id @default(cuid())
  clerkId   String   @unique
  email     String   @unique
  name      String?
  image     String?
  createdAt DateTime @default(now())
}

model Tournament {
  id        String   @id @default(cuid())
  title     String
  date      String
  location  String
  slots     Int
  game      String
  img       String
  createdAt DateTime @default(now())

  // Room info for admins to share with joined users
  roomId       String?  // optional room / voice channel id
  roomPassword String?  // optional password or PIN
  showRoom     Boolean  @default(false) // admin-controlled visibility to users

  registrations Registration[]
}

model Registration {
  id           String   @id @default(cuid())
  tournamentId String
  tournament   Tournament @relation(fields: [tournamentId], references: [id])

  teamName     String
  university   String
  phone        String?
  leader       Json
  members      Json
  createdAt    DateTime @default(now())
}
